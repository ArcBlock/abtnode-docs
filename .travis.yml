language: node_js
node_js:
- '12'
sudo: false
git:
  submodules: false
branches:
  only:
  - master
before_script: make travis
script: make build
deploy:
- provider: script
  skip_cleanup: true
  script: bash ./tools/publish.sh
  on:
    branch: master
- provider: script
  script: make release
  on:
    branch: master
- provider: script
  script: make deploy
  on:
    branch: master
env:
  global:
  - ALIYUN_ENDPOINT=http://39.98.93.191/admin
  - ALIYUN_ACCESS_KEY=z1aWXyf27QaUtAAT6wv4t5sL4visgBhRBPb
  # ALIYUN_ACCESS_SECRET
  - secure: NAix9AI+72JPMuoL5Rmk+NF8RB1FC84bP1TPjRtRPIFssfenGAqz0HmGBTVP1th6qQ0kV3WRgexm8oSRT7xnBpiRrxKIXmuEAtnBvF6HlGA45/IIQ/ORsQeKIv/tJRRpxqfY4hxBWQWtWh+bGU/wSzrFq1qF4GGYGccFwQVgBx9/sISdU739Jp9GpseNh/TAUmGeV0Jy37e0Df/17Me43uKcQIBtgZArKBK0KGNGYR0suoyX2MGCSGx5ch8Df0q8dpP+HQh+koRMnP8zxTqG9wmaodRDIkd/+fegbFkq+KfW28c9YYyN7V0p44fvOte8EbaLSJsdiU5UPxCTrUovVB/sDE0U/vscilKbl3Lipm010QYtiF3yGEguZUl+u/6XmJvtAX5KfxrIlLdm54AqGSRceJ0P8Pj09oUZHTUlkuiD1Pz1tQ7LEMf/Be1Y56lwL9GwMtXW1lO69VekzuuGSVrHgq5JphNAJDLpXIvhKHhvxv8FUjUTm4ZmheGKj2GGsv+C9Ok+nnyLmgxPKtQL8Oa4P8S7eoTfCeoF4sBWbZQ25aSoX8VbGOSUUiB0jGWYNrc2AuQpFtPOGKrFO7jCW2hz95QERjV5lpQEbu3fYvG6XWHnDkc9xe/n8ZA5X80XnWiQ+08MDcGVWsCPHu+JCkfpwM6AO+TrF3b5hlan87s=
  - AWS_ENDPOINT=http://54.213.55.12/admin
  - AWS_ACCESS_KEY=z1W9k2T7XTddPMtArMs7gs6pJYvsN63dggE
  # AWS_ACCESS_SECRET
  - secure: hITGw+9uZlgR1BdA0qUTe9syhgoxoFnTq3ZJZVQHLKZqsXd20jHNdCieqkY7Tjm7bSlpzXHL/tK2cLdZBgZsiQ2VCSrkeQULYGWxBUN0ReMJBugiIsU0XD6zSZ4ZxophTezjJjE3wD/UxuL19B++XjKl/nY0TFEqFGIN7uUGh1fVvRO3p/1YXgDrP7tl3bSaMjDZHpFkYPKjC6MypK4g+LpEmPlXWG2dkTU8uy0XqoMnucvpzXHZ0LvIw0AXcBTLuaxaU0hnPaZNJU1fW3/z7eAyJtBQVeqmptYuw42lvZ+CmCi9LZbnYfLZZasPGXbFGhlefo1fEOv7n2Oz+56ayHhyjZs2zmiWvvoJuq2ztmdDFlkpTF8akoRXAr6k9WeNuh/a6TGCL+6QTYCkZ5B+oiqBCUX2uVpeci6s+mS4ODVurv8yBEQ8W5WnPk3ZCEo/QueP2U9NAFd5np34wdhvLsN0Vd2zBYOqg5dJhjGMH7p/a+1Y0+LZQF5AKfjrlGYsQ+KkNaez3KTqH/gyp+syLQtC3RpC14BSQU5sq3qN1r0yNvVughWj7jnHE33tXP67MI5+9Dv/c5npN/MIRXRKx1VLA8y0lAV+j11jh2ZPORpwJ2Ox9FwHj6/FLqrFktkTcS2paCNClv1OAPwfDRlCVEXBNmIIgLgtcEVPrf4PugM=
  - secure: CKzMAgQisd5zJ/9GAsLrsyrYDmrcAOmx0qhmlaYeHUhjVPuzb2rCrsYiNqFZO1fYumbl3fH2tS1HlGIr0wfRiW+OfOQMmtApPXOI4+3pSw/IaxZwJT7sWs9Yutr0naT9o67sNVhmATywhzkA99liG1D7hU55Kk4Qmz+rLhyG1SEKJrYw/SujTowLgJhQNqcoS1ZL0XRP9tPjKjXEJ7GaYwMB1TpdRCBG+lpVOZxwlOx7oqZJ0k306oFnBhWyINcgw+/QyMj2WvOXyYzSdIPQ78fm8MXcolwPo7U2ZK02fPbFo8YqcG6hx1HRSJQhRIAg87CFg44YVW5taRp4LsIBGWTus7ETQXbtg8W0JT3c3xCWUgu1JcNAEseCbBhGre0VM43G7ZmliCCb1xDdR27Iw0WCSULNDZNRTUZgsSHVEQw+FP8CEDJPSSF7w1HCLyWlQ6x3dckKZB/tpiYk0vfCbuzPXof2YeVM202Wk8FT2E5gauORTtWBii0nGG1wSoIp2Y++XM8vFiVQnmcZcbFFcMsKQlj6Jf+l14PQrMsmcFQYC6vPtPyaFTClmBPNcIFF1QbWpcVITStzpWtRV1ySZ/TnznANCUWhezTwfutmUouecBpu3XV3tJWH0qZT8vVjvH9RnFbxVknf+Pl7O7NrYZvkW6PW7H8kX6uYcnRN42U=
  - secure: ec7cFmMRuSA6ppkR8C8tv6abXWCTQJumE3ZBbo4ZzYogRsjuIO7QLA/X+pOqupTzzhfGi+XSH6u3ZLItQLLchSGC/VC4pQpv8bW79H+5lLLadOAr3Lx4UPPaJmqpK3cy732P/Ew/M6q0jgYddKPtHAXtWZpjmYwf7a2QXZX1/PV5ynu9FkDAfAiJzkfUZO57sFGbSlalpOZ9gAjJgY6+CEbmOAfwGDA6IsTU8OdI3f1q9EBnSx/uVTRvVaIUmfCQCKIJ58wCNOBsGHavIz23q7umTqANT/7vDsZSleC1tw5XIZQE3RcrsyrBNdlUXlcGDpeSRPvzikKNRgqXVMEoImtofTJcp+DsoaQZ+ltIQl2Xg78XAvRBDq4m/69Pn4/fkW4hrBUfavA7ebUidAYiXjiqm9gOd3v1TroiT8S9Hcuh+JBQcYw41jtxJhS+AgvaxLBs/511U6dD9H7zta9oh76RQaf1iCvPamKZJB6kZOIcV6SqOmNNm9hVbzWBO1yC7kE9nHiBNVZ/z2+bsHQbKJFcLkgYqiJ1QY6LEOTz2d5Pmj9ddzx2TqeN2csDHuISBQ3xEhBl7gun71l3CLXErZOzf+at0ROXHP5ndmW77xKPZZrdZ2voLIAAWzVhVQE8dl0shnUibJLBueTzzkJ6rzIPsUBzkAZ6i6925njdzLo=
  - secure: WErNq5iPaaciJDAIhBl/53nATkss8Y8+u2IBTIYRFvvRqJvFmYLJ4+D7E1haeDb745PJMwtxIq1MUeryc1GDF+WR178HH1JbOwmSdsFjcWemnyw9xGw91TOjWA4TLQZp99DxE0ra+7elTUHBNRTYQiET78aZ5KHMuvZFySPlHw8G8YynznGIFudyZA5BVhS9JNSrTrxRduG2BVc2UI+om8ZGVEclsoVXISb5JJWMDxKCUn3EKldapI0Ok660VStWODLynHajjEHZ0CTjqiQ8oNG0e9JrsvMdctKsWr9aqK7IVE3HwSd5reEXoTy+1EAfEV1VFDavI0RijFWR3hURAO7XEbkDTSwJBa747gsnTSwy9NAVmI8CA7r0b5qI72yKCXExBiC3rFhEqVdTmkm/i/cpLadcTnVgTvQxYIC+K+/am/+tkQp0N032maBlHsqOk0dyBsQ5t5gTXWhl1RKyyq6gyUd73kB99wumBLxaTXE2nAkfvlNS3tPaXtF1GTh3GFlpxGAVKDBkRJqlGMmBc4eoB+iCKpeWZURTAcELmOSGh1n9z2b5ZtfHiIygp7/kA1acwRbbjgjhg/V8fXAFq+sZ7RDMK3xTziQkvL0j6S42YSNJBSfRhYNk2NqH+6YFaOhdmG1vzNLoF5Zg4EeNHWvCAiteC7UXHiBgVaQmTOQ=
  - secure: HtdhSWJ7IqajYQqGDfo0LNAPsCprjZ3cn0QUo02BpgyG6ozPhst7WwkS8+yFMHvEWDuLXQmJ+RBvkGOGdRFbzkR5l+2V7LbKJ1bDzqDOBAY8KxFTF2bTnOAFqw3xmqRb3hjOiKQ+mxTXGVuR9iR6xxRnwrYAa82/RW7INJS6yO3dmV3gtCORnmXdyhzPYch5Z2FizIV7huuzJ5zt5+ZnjhNVT1XksI6J8wROGgBGTsd665sFD/UN7/OL4vxRNcMpCQoUqg5lcV75uvao9W1b/tkHkuZiienZb1WZZR9cgxctTHi6SXKw+KUFPIH3YisbVO5p3CE2vaAkiJ4zcrewUBmBKaHhheFkx7Ni+xQmzrutsl5dlGAO230ZvOvyjUb5wshYFJBs2txYyflB/gujnhXOuK9DR8DrF+CRrSL+5cJDotaC5xD8nnr4owH+OP5/qEUBuyntxN8FpQjU53de4SfCGYLVDySIcNDburEk7STetXo58Gu7qxwbkLOD1M+3H1Ur1rjFyYntXBKpQJqUjMzG8VHLD8r20ltRvajlMX4vk1GALQMEbIL1gkJBmIhtAH8oDec6O010P0BnZWyti5NC/oR5Uha7f8KDTlSTo7JxrGblVTZC9Kw4iATRrUGF7W+eIosv4KbkOhltEEBeWLE4fDGaHCjwCZkQ4Kbx2Q4=
  - secure: sPOOBzPvmgBxj81eM5A+U7JM+b4nhkKI5Zc4HEFQfS9G0hI2HYHC1wmZhVKxqFmvzmKjirlS1dPN9fW5BKDbz3n8/dVULTuzbL5gb5rqGoWzNUQ2pekIOYUPHBxKbNHbQDqTLEwbpTQXGzfhmfGu9cuSUDy5dpQcYL6HOVqgIYnf6/193wWv6ETpSSq8P7s2YD/+pIK7t8+x+X2uPadq9Js2Xno+RzcqoE5FQRwaAbG8d8JKJF8uQvj7MWAaGyDQxIH/fCQCJE34a+K0fQcK5vtYUY3Ezl27mfX72lBJhC08m7q3wj461Hgp+w/9W1cVl5NeWzQcoAO9pQX23ooWkf31y1eZWtJoQQ4YS6WqGGyj8COYjaX2C+LLVHDKMU7A7MIr1cy19yZYP2JhOiMJnAEv3AG3mQzcr+9QO+PNEgTt2/vHTNJrQMN3u2e9iBGzNidZ/n0AqNSfXOMYTcSYSWhUiETBP4ySi+2lxzfVhpOuZOBB8n/y2oboYFhOs13ebSgv2Dac+qSTOUX/Ck+A10tZOlpYj5ycz4iwM+Wzb3XxaOLf52V1tHycVrPWZ3ywIfYgKSclFNaf3UMvKLvE1cQ4pK3kN2bCxaQJP/1FTNbBO9e85nYlyntPZkAsIcJT4CF9onn0tZ6pRMw88/J4y+i5uzGQKD47mfajktw+0JA=
  - secure: Q+CDnwlyQKbxEUEPRTji2o+g9Qgu+M1g+w92elaNgwqrIvTU6wfK5fYF3R8XWUUW4r3ANf+j6k4/0dBD1oTEfkpHQDPKr2aHxljJu4FcqnLLWn0YzMI5PCBYWYPaK7itqWDvSzwz8akw5HIdZWRDg7KLXAOrwWwzF5Eg1i4JXYxcdTkdy+71RtmG0Yx9hGNJAmwwBQsJyeg1KsolfIcntKyLKFjVWzGPoyFpCNNZgxnZxI/zyrsF3uc03RQnRxl0mGdhx9w8GoMBmPZCQ2PS6T1uS5ulI9voDqR07CbcOqGdCx9gH/ulogGM00jENyfTZxMl3MYTdi2UB4xS+K/ZqnmtqKFWoJtY3fZzWRekkMnOjkifsd0uRgeYCb1Cz8dXQ0DaNOob/9OYwsoFBlGXJgy8DqNXOy039ZN3YOHNV2jys8eJ1VllLS6J80xxXQqC7YTDANvMmYfwvqofBzylq+tD+ydj1hIznP5QMdOahlyS9udDKqCDiBBSjJk23CGZeL7rkla6MwUL1pgX6fJtt6f6TfsSuQRbzqwHUKJ/EPj1CBnams6+Ng7h6Id619YeSWIYRDNmxAe8r+kN0iyjB5wC0GW/5VqE6QbH/TxUXfwu+09zvPBaJ8Ux00KXFRLaTmUxjLTqLIZHESmW7dscDIPRFXQVPuEGMFqwaplnJnA=
